<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="shortcut icon" href="data:image/x-icon;," type="image/x-icon">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Super User</title>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="bootstrap_css" >

    <!-- Optional theme -->
    <link rel="stylesheet" href="bootstrap_theme_css" >

    <link rel="stylesheet" href="sweetAlert_css" >

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<body>

<div class="container">
    <div class="alert fade in" id="welcomeAlert" style="visibility: hidden">
        <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
        <div id="welcomeAlertText"></div>
    </div><br>

    <ul class="nav nav-pills">
        <li class="active"><a data-toggle="pill" href="#home">Liste des utilisateurs</a></li>
        <li><a data-toggle="pill" href="#menu1">Remplir un nouveau formulaire</a></li>

    </ul>

    <div class="tab-content">
        <div id="home" class="tab-pane fade in active">
            <h3>Liste des utilisateurs</h3>

            <div style="margin-bottom: 10px">
                <button class="btn btn-default" id="add_user_btn">Ajouter un utilisateur</button>
            </div>



            <div class="well">
                <table class="table table-hover">
                    <thead>
                    <tr>
                        <th>user</th>
                        <th>email</th>
                        <th>is_superuser</th>
                        <th>creation_time</th>
                        <th>last_update_time</th>
                        <th>operations</th>
                    </tr>
                    </thead>
                    <tbody id="users_list">
                    </tbody>
                </table>
            </div>
        </div>
        <div id="menu1" class="tab-pane fade">
            <h3>Remplir un formulaire</h3>
            <p>ici il y'aura tous les formulaires</p>
        </div>
    </div>
</div>


<script src="/jquery"></script>
<script src="/jquery_cookie"></script>
<script src="/bootstrap_js"></script>
<script src="/sweetAlert_js"></script>
<script src="/myScripts"></script>


<script type="application/javascript">
    var token = $.cookie("tokenJWT");
    $( document ).ready(function() {



        //getting All users
        $.ajax({
            url : 'v1/users', type : 'GET',
            method : "GET",
            dataType : 'json',
            beforeSend: function (request)
            {
                request.setRequestHeader("Authorization", token);
            },
            success : function(json, statut, request){
                welcomeMessage(json.connected_user.email);
                showUsersList(json.all_users);
            },
            error : function(json, statut, erreur){
                errorMessage(json.connection, statut, erreur);
            },
            complete : function(resultat, statut){

            }
        })

    });
</script>

</body>
</html>